import numpy as np
import pandas as pd
import matplotlib.pyplot as plt

# Mean spot
# results = [['Call', '2023-10-26', 10, -6.80000000000004], ['Put', '2023-10-26', 6, 7.300000000000011], ['Call', '2023-10-27', 0, 0], ['Put', '2023-10-27', 1, 3.9499999999999886], ['Call', '2023-10-30', 6, 25.900000000000063], ['Put', '2023-10-30', 4, 0.700000000000017], ['Call', '2023-10-31', 6, 12.499999999999943], ['Put', '2023-10-31', 2, 9.59999999999998], ['Call', '2023-11-01', 0, 2.3000000000000016], ['Put', '2023-11-01', 1, 19.799999999999983], ['Call', '2023-11-02', 11, 16.09999999999991], ['Put', '2023-11-02', 4, 3.900000000000034], ['Call', '2023-11-03', 1, 9.799999999999955], ['Put', '2023-11-03', 4, -6.600000000000023], ['Call', '2023-11-06', 2, -0.8000000000000114], ['Put', '2023-11-06', 2, 10.799999999999983], ['Call', '2023-11-07', 7, 2.150000000000013], ['Put', '2023-11-07', 3, 15.299999999999983], ['Call', '2023-11-08', 2, -0.399999999999995], ['Put', '2023-11-08', 2, 0.950000000000017], ['Call', '2023-11-09', 1, 13.050000000000011], ['Put', '2023-11-09', 4, -8.299999999999983], ['Call', '2023-11-10', 1, 0.05000000000001137], ['Put', '2023-11-10', 3, -1.8500000000000085], ['Call', '2023-11-13', 3, 11.150000000000006], ['Put', '2023-11-13', 5, 11.849999999999952], ['Call', '2023-11-15', 0, 1.1000000000000014], ['Put', '2023-11-15', 0, 4.150000000000006], ['Call', '2023-11-16', 0, 0], ['Put', '2023-11-16', 4, 0.3999999999999915], ['Call', '2023-11-17', 1, -1.6999999999999886], ['Put', '2023-11-17', 5, 43.19999999999999], ['Call', '2023-11-20', 6, 17.150000000000006], ['Put', '2023-11-20', 2, -3.799999999999983], ['Call', '2023-11-21', 3, 4.549999999999983], ['Put', '2023-11-21', 2, 2.75], ['Call', '2023-11-22', 0, 0], ['Put', '2023-11-22', 1, 9.299999999999983], ['Call', '2023-11-23', 2, 0.19999999999998863], ['Put', '2023-11-23', 1, 6.30000000000004], ['Call', '2023-11-24', 6, 27.50000000000003], ['Put', '2023-11-24', 4, -0.10000000000002274], ['Call', '2023-11-28', 5, 2.59999999999998], ['Put', '2023-11-28', 1, 0.3499999999999943], ['Call', '2023-11-29', 9, 48.40000000000005], ['Put', '2023-11-29', 5, 5.20000000000001], ['Call', '2023-11-30', 3, -0.7999999999999545], ['Put', '2023-11-30', 11, 7.599999999999909], ['Call', '2023-12-01', 1, -3.400000000000034], ['Put', '2023-12-01', 2, -1.3000000000000398], ['Call', '2023-12-04', 6, 9.650000000000091], ['Put', '2023-12-04', 1, 13.149999999999977], ['Call', '2023-12-05', 5, 0.1500000000000341], ['Put', '2023-12-05', 6, -1.0000000000000426], ['Call', '2023-12-06', 4, 37.8], ['Put', '2023-12-06', 2, 1.3500000000000085], ['Call', '2023-12-07', 1, 0.05000000000001137], ['Put', '2023-12-07', 1, -1.7000000000000455], ['Call', '2023-12-08', 0, 8.349999999999966], ['Put', '2023-12-08', 3, 24.900000000000034], ['Call', '2023-12-11', 2, 6.2999999999999545], ['Put', '2023-12-11', 6, 16.599999999999994], ['Call', '2023-12-12', 0, 6.5], ['Put', '2023-12-12', 8, 9.249999999999986], ['Call', '2023-12-13', 0, 0], ['Put', '2023-12-13', 1, -2.450000000000017], ['Call', '2023-12-14', 1, 13.75], ['Put', '2023-12-14', 2, -2.0000000000000284], ['Call', '2023-12-18', 3, 6.949999999999989], ['Put', '2023-12-18', 7, -5.500000000000028], ['Call', '2023-12-19', 7, 5.849999999999994], ['Put', '2023-12-19', 1, 4.099999999999994], ['Call', '2023-12-20', 5, 2.450000000000074], ['Put', '2023-12-20', 0, 0]]

# Normal spot ATM
results = [['Call', '2023-10-26', 7, 15.599999999999966], ['Put', '2023-10-26', 5, 27.199999999999875], ['Call', '2023-10-27', 2, 15.350000000000023], ['Put', '2023-10-27', 3, 8.899999999999991], ['Call', '2023-10-30', 3, 0.9000000000000483], ['Put', '2023-10-30', 3, 1.5500000000000824], ['Call', '2023-10-31', 10, 20.55000000000001], ['Put', '2023-10-31', 4, -8.749999999999943], ['Call', '2023-11-01', 0, 2.3000000000000016], ['Put', '2023-11-01', 1, 19.799999999999983], ['Call', '2023-11-02', 2, 14.850000000000023], ['Put', '2023-11-02', 3, 2.34999999999998], ['Call', '2023-11-03', 0, 0], ['Put', '2023-11-03', 1, -1.0], ['Call', '2023-11-06', 0, 0], ['Put', '2023-11-06', 0, 8.350000000000009], ['Call', '2023-11-07', 7, 2.150000000000013], ['Put', '2023-11-07', 3, 15.299999999999983], ['Call', '2023-11-08', 2, -0.399999999999995], ['Put', '2023-11-08', 2, 0.950000000000017], ['Call', '2023-11-09', 1, 13.050000000000011], ['Put', '2023-11-09', 4, -8.299999999999983], ['Call', '2023-11-10', 1, 0.05000000000001137], ['Put', '2023-11-10', 3, -1.8500000000000085], ['Call', '2023-11-13', 3, 16.14999999999999], ['Put', '2023-11-13', 5, -8.950000000000045], ['Call', '2023-11-15', 3, 2.999999999999943], ['Put', '2023-11-15', 1, 0.09999999999999953], ['Call', '2023-11-16', 2, 4.500000000000057], ['Put', '2023-11-16', 3, 2.2499999999999716], ['Call', '2023-11-17', 2, 7.09999999999998], ['Put', '2023-11-17', 5, 25.549999999999955], ['Call', '2023-11-20', 6, 17.150000000000006], ['Put', '2023-11-20', 2, -3.799999999999983], ['Call', '2023-11-21', 3, 4.549999999999983], ['Put', '2023-11-21', 2, 2.75], ['Call', '2023-11-22', 0, 0], ['Put', '2023-11-22', 3, 33.099999999999966], ['Call', '2023-11-23', 2, -2.0499999999999545], ['Put', '2023-11-23', 1, -0.4000000000000057], ['Call', '2023-11-24', 8, 13.200000000000102], ['Put', '2023-11-24', 4, 0.8999999999999488], ['Call', '2023-11-28', 2, 4.650000000000006], ['Put', '2023-11-28', 3, 4.950000000000003], ['Call', '2023-11-29', 6, 98.94999999999993], ['Put', '2023-11-29', 0, 0.4499999999999993], ['Call', '2023-11-30', 3, -0.7999999999999545], ['Put', '2023-11-30', 11, 7.599999999999909], ['Call', '2023-12-01', 2, -5.899999999999977], ['Put', '2023-12-01', 1, 4.050000000000011], ['Call', '2023-12-04', 1, 26.09999999999991], ['Put', '2023-12-04', 1, 0.9999999999999982], ['Call', '2023-12-05', 6, 11.950000000000045], ['Put', '2023-12-05', 5, 2.5], ['Call', '2023-12-06', 0, 8.049999999999997], ['Put', '2023-12-06', 7, 28.049999999999955], ['Call', '2023-12-07', 0, 10.150000000000034], ['Put', '2023-12-07', 4, 11.449999999999989], ['Call', '2023-12-08', 1, -1.6999999999999886], ['Put', '2023-12-08', 4, 16.700000000000017], ['Call', '2023-12-11', 2, 6.2999999999999545], ['Put', '2023-12-11', 6, 16.599999999999994], ['Call', '2023-12-12', 3, -13.400000000000006], ['Put', '2023-12-12', 6, -2.3999999999999773], ['Call', '2023-12-13', 2, 3.4499999999999993], ['Put', '2023-12-13', 2, 1.9999999999999716], ['Call', '2023-12-14', 4, -5.299999999999841], ['Put', '2023-12-14', 2, -0.6499999999999915], ['Call', '2023-12-15', 3, -4.89999999999992], ['Call', '2023-12-18', 3, 6.949999999999989], ['Put', '2023-12-18', 7, -5.500000000000028], ['Call', '2023-12-19', 7, 5.849999999999994], ['Put', '2023-12-19', 1, 4.099999999999994], ['Call', '2023-12-20', 1, -0.5499999999999972], ['Put', '2023-12-20', 3, 20.79999999999999]]

call_pnl = []
put_pnl = []
sum_pnl = []
prof_list = []
loss_list = []
for result in results:
    if result[0] == 'Call':
        if (result[3] > 0 and result[3]<5) or result[3]>30:
            tmp = - (7/15)*result[2]
        else:
            tmp = result[3] - (7/15)*result[2]
        # if(tmp>0):
        #     prof_list.append(tmp)
        # elif(tmp<=0):
        #     loss_list.append(tmp)
        # tmp = result[3] - (7/15)*result[2]
        call_pnl.append(tmp)
    elif result[0] == 'Put':
        if (result[3] > 0 and result[3]<5) or result[3]>30:
            tmp2 = - (7/15)*result[2]
        else:
            tmp2 = result[3] - (7/15)*result[2]
        # tmp2 = result[3] - (7/15)*result[2]
        put_pnl.append(tmp)
        # put_pnl.append(result[3])
        if(tmp + tmp2>0):
            prof_list.append(tmp + tmp2)
        elif(tmp + tmp2<=0):
            loss_list.append(tmp + tmp2)
        sum_pnl.append(tmp + tmp2)
print("Net sum:",sum(sum_pnl))
print("average profit per day:",sum(sum_pnl)/len(sum_pnl))
# print(sum(call_pnl)/len(call_pnl), sum(put_pnl)/len(put_pnl), sum(sum_pnl)/len(sum_pnl))
print("Percentage profitable trades:",len(prof_list)/len(call_pnl),"average profit:", sum(prof_list)/len(prof_list),"Average loss:", sum(loss_list)/len(loss_list))
print("No of days:",len(sum_pnl))
    